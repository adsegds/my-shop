<!-- head内に追加 -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<!-- header内に追加（h1の下） -->
<div id="auth-area" style="text-align: right; padding: 0 15px; color: white;">
    <button onclick="showLogin()" style="background:#fff; color:#032f4b; border:none; padding:5px 10px; border-radius:5px; margin:0 5px;">ログイン</button>
    <button onclick="showRegister()" style="background:#fff; color:#032f4b; border:none; padding:5px 10px; border-radius:5px;">会員登録</button>
    <span id="user-info" style="margin-left:10px;"></span>
</div>

<!-- bodyの最後に追加 -->
<div id="auth-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:999;">
    <div style="background:white; width:90%; max-width:400px; margin:100px auto; padding:20px; border-radius:12px;">
        <h2 id="modal-title">ログイン</h2>
        <input type="email" id="auth-email" placeholder="メールアドレス" style="width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #ddd;">
        <input type="password" id="auth-pass" placeholder="パスワード" style="width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #ddd;">
        <button onclick="authAction()" style="background:#007bff; color:white; border:none; padding:10px; width:100%; border-radius:8px; margin-top:10px;">実行</button>
        <button onclick="closeModal()" style="background:#ccc; color:#333; border:none; padding:10px; width:100%; border-radius:8px; margin-top:10px;">キャンセル</button>
    </div>
</div>

<script>
    // 君のFirebase configをここに貼り付け
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID",
        // ... 他の行
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    let isLogin = true;

    // ログイン状態監視
    auth.onAuthStateChanged(user => {
        if (user) {
            document.getElementById('user-info').innerText = `ようこそ ${user.email}`;
            document.querySelectorAll('.login-only').forEach(el => el.style.display = 'none');
        } else {
            document.getElementById('user-info').innerText = '';
            document.querySelectorAll('.login-only').forEach(el => el.style.display = 'block');
        }
    });

    function showLogin() {
        isLogin = true;
        document.getElementById('modal-title').innerText = 'ログイン';
        document.getElementById('auth-modal').style.display = 'block';
    }

    function showRegister() {
        isLogin = false;
        document.getElementById('modal-title').innerText = '会員登録';
        document.getElementById('auth-modal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('auth-modal').style.display = 'none';
    }

    function authAction() {
        const email = document.getElementById('auth-email').value;
        const pass = document.getElementById('auth-pass').value;
        if (isLogin) {
            auth.signInWithEmailAndPassword(email, pass).catch(err => alert(err.message));
        } else {
            auth.createUserWithEmailAndPassword(email, pass).catch(err => alert(err.message));
        }
    }
</script>
